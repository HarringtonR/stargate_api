option_settings:
  aws:elasticbeanstalk:application:environment:
    # Database connection string - using the same key as in appsettings.json
    ConnectionStrings__StarbaseApiDatabase: "Data Source=/var/app/current/starbase.db"
    
# Container commands run after the application bundle is extracted but before it's deployed
container_commands:
  01_ensure_sqlite_directory:
    command: "mkdir -p /var/app/current && chmod 755 /var/app/current"
    ignoreErrors: true
  02_set_permissions:
    command: "chown webapp:webapp /var/app/current || true"
    ignoreErrors: true